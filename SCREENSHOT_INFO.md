# Скриншоты и демонстрация

## Внешний вид приложения

### Главное окно с информационной панелью

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ [Открыть файл…] │ hypercube.mat                                              │
├───────────────────────────────────────────────┬─────────────────────────────┤
│                                               │ ▼ Информация об изображении │
│                                               ├─────────────────────────────┤
│                                               │ Формат: MATLAB (.mat)       │
│                                               │ Тип данных: Float64         │
│            [Изображение]                      │ Разрешение: 100 × 512 × 512 │
│                                               │ Каналы: 100                 │
│                                               │ ──────────────────────────  │
│                                               │ Мин. значение: 0.0234       │
│                                               │ Макс. значение: 0.9876      │
│                                               │ Среднее: 0.4521             │
│                                               │ Станд. откл.: 0.2341        │
│                                               │ ──────────────────────────  │
│                                               │ Размер в памяти: 199.2 МБ   │
├───────────────────────────────────────────────┴─────────────────────────────┤
│ Layout: [Auto ▼] Mode: [Gray|RGB]  dims: 100 × 512 × 512                   │
│ Канал: 50 / 99  [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━]                          │
│ Длины волн (нм): [Загрузить из txt…] или диапазон: от 400 до 900 шаг 5     │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Функции информационной панели

### 1. Сворачивание/разворачивание
- Клик на заголовок "▼ Информация об изображении" сворачивает панель
- В свернутом состоянии: "▶ Информация об изображении"
- Анимированный переход

### 2. Отображаемая информация

#### Основные характеристики:
- **Формат**: Определяется автоматически при загрузке
  - "MATLAB (.mat)" для .mat файлов
  - "TIFF (.tiff)" для .tiff файлов
  
- **Тип данных**: Оригинальный тип до конвертации в Double
  - Float64 - для MATLAB double
  - Float32 - для MATLAB single
  - UInt8 - для TIFF 8-bit
  - Int16, Int32, UInt16 - для будущих форматов

- **Разрешение**: Размеры куба в формате "D₀ × D₁ × D₂"
  - Пример: "100 × 512 × 512" для CHW layout
  - Пример: "512 × 512 × 100" для HWC layout

- **Каналы**: Количество спектральных каналов
  - Зависит от выбранного Layout
  - Автоматически пересчитывается

#### Статистика:
- **Мин. значение**: Минимум по всему кубу
- **Макс. значение**: Максимум по всему кубу  
- **Среднее**: Среднее арифметическое всех значений
- **Станд. откл.**: Стандартное отклонение

*Форматирование*: До 4 значащих цифр (%.4g)

#### Технические характеристики:
- **Размер в памяти**: Объем в Double (8 байт на элемент)
  - Отображается в МБ с точностью до 0.1
  - Пример: "199.2 МБ" для куба 100×512×512

### 3. Интерактивность

- Все текстовые значения можно выделить и скопировать
- Панель адаптируется к изменению Layout
- Обновляется автоматически при загрузке нового файла

## Примеры использования

### Пример 1: MATLAB файл
```
Формат: MATLAB (.mat)
Тип данных: Float64
Разрешение: 204 × 256 × 256
Каналы: 204
Мин. значение: -0.0523
Макс. значение: 1.234
Среднее: 0.5123
Станд. откл.: 0.2891
Размер в памяти: 102.4 МБ
```

### Пример 2: TIFF файл
```
Формат: TIFF (.tiff)
Тип данных: UInt8
Разрешение: 100 × 512 × 512
Каналы: 100
Мин. значение: 0
Макс. значение: 0.9882
Среднее: 0.4521
Станд. откл.: 0.2341
Размер в памяти: 199.2 МБ
```

## Технические детали

### Вычисление статистики
- Используется extension `HyperCube+Statistics`
- Вычисление происходит при открытии панели
- Оптимизировано для больших массивов

### Размер в памяти
```swift
let sizeInBytes = cube.totalElements * MemoryLayout<Double>.size
let sizeInMB = Double(sizeInBytes) / (1024 * 1024)
```

### Обновление при смене Layout
- Панель подписана на изменения `state.layout`
- Количество каналов пересчитывается автоматически
- Статистика остается неизменной (по всему кубу)

## UI/UX решения

### Дизайн
- Ширина панели: 260 пикселей (фиксированная)
- Отступы: 12px вокруг панели, 8px внутри
- Цвета: системные (адаптируются к темной/светлой теме)
- Шрифт: моноширинный для значений (лучшая читаемость чисел)

### Расположение
- Справа от изображения (не перекрывает контент)
- Scroll при недостатке места по вертикали
- Divider слева для визуального разделения

### Анимация
- Сворачивание: easeInOut, 0.2 секунды
- Плавный переход opacity + move(edge: .top)

## Будущие улучшения

Возможные дополнения к информационной панели:
- [ ] График histogram
- [ ] Информация о длинах волн (диапазон, шаг)
- [ ] Статистика текущего канала (не всего куба)
- [ ] Цветовая карта (colormap info)
- [ ] Кнопка экспорта метаданных в JSON
- [ ] История открытых файлов

