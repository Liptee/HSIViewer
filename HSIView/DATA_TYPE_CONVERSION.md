# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≥–∏–ø–µ—Ä–∫—É–±–∞

## üí° –û–ø–∏—Å–∞–Ω–∏–µ

–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–∏–ø–µ—Ä–∫—É–± –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–ª–∏ –æ–±—Ä–µ–∑–∫–æ–π –∑–Ω–∞—á–µ–Ω–∏–π.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

**–¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –±–µ–∑ –∑–Ω–∞–∫–∞:**
- `UInt8` (0-255) - 1 –±–∞–π—Ç –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- `UInt16` (0-65535) - 2 –±–∞–π—Ç–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç

**–¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å–æ –∑–Ω–∞–∫–æ–º:**
- `Int8` (-128...127) - 1 –±–∞–π—Ç –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- `Int16` (-32768...32767) - 2 –±–∞–π—Ç–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- `Int32` (-2147483648...2147483647) - 4 –±–∞–π—Ç–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç

**–¢–∏–ø—ã —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π:**
- `Float32` - 4 –±–∞–π—Ç–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- `Float64` (Double) - 8 –±–∞–π—Ç–æ–≤ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç

## üîß –†–µ–∂–∏–º—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–∞–Ω–Ω—ã–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞.

**–§–æ—Ä–º—É–ª–∞:**
```
normalized = (value - currentMin) / (currentMax - currentMin)
newValue = targetMin + normalized * (targetMax - targetMin)
```

**–ü—Ä–∏–º–µ—Ä 1:** Float64 [0.0, 1.0] ‚Üí UInt8
```
currentMin = 0.0, currentMax = 1.0
targetMin = 0, targetMax = 255

value = 0.5
normalized = (0.5 - 0.0) / (1.0 - 0.0) = 0.5
newValue = 0 + 0.5 * 255 = 127.5 ‚Üí 128 (–ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)

–†–µ–∑—É–ª—å—Ç–∞—Ç: [0, 255]
```

**–ü—Ä–∏–º–µ—Ä 2:** UInt16 [0, 65535] ‚Üí UInt8
```
currentMin = 0, currentMax = 65535
targetMin = 0, targetMax = 255

value = 32767
normalized = 32767 / 65535 ‚âà 0.5
newValue = 0 + 0.5 * 255 ‚âà 128

–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–∞–Ω–Ω—ã–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
```

**–ü—Ä–∏–º–µ—Ä 3:** Int16 [-100, 100] ‚Üí UInt8
```
currentMin = -100, currentMax = 100
targetMin = 0, targetMax = 255

value = 0 (—Å–µ—Ä–µ–¥–∏–Ω–∞)
normalized = (0 - (-100)) / 200 = 0.5
newValue = 0 + 0.5 * 255 = 127.5 ‚Üí 128

–†–µ–∑—É–ª—å—Ç–∞—Ç: [-100, 100] ‚Üí [0, 255]
```

### 2. **–û–±—Ä–µ–∑–∫–∞ (Clamping)**

–ó–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è –¥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞ –±–µ–∑ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.

**–§–æ—Ä–º—É–ª–∞:**
```
newValue = max(targetMin, min(targetMax, value))
```

**–ü—Ä–∏–º–µ—Ä 1:** Float64 [0.0, 500.0] ‚Üí UInt8
```
value = 100.0 ‚Üí 100 (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö [0, 255])
value = 300.0 ‚Üí 255 (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ max)
value = -10.0 ‚Üí 0 (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ min)

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ó–Ω–∞—á–µ–Ω–∏—è > 255 —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è 255, < 0 —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è 0
```

**–ü—Ä–∏–º–µ—Ä 2:** Int16 [-1000, 1000] ‚Üí Int8
```
value = 50 ‚Üí 50 (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö [-128, 127])
value = 200 ‚Üí 127 (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ max)
value = -200 ‚Üí -128 (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ min)

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ [-128, 127]
```

## üìä UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### DataTypePanel

–†–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –ø–æ–¥ –ø–∞–Ω–µ–ª—å—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.

**–≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**

1. **–¢–µ–∫—É—â–∏–π —Ç–∏–ø:**
   ```
   –¢–µ–∫—É—â–∏–π —Ç–∏–ø: UInt8
   ```

2. **–í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞:**
   ```
   –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤: [Dropdown]
   - Float64 (Double)
   - Float32
   - UInt8 (0-255)
   - UInt16 (0-65535)
   - Int8 (-128...127)
   - Int16 (-32768...32767)
   - Int32
   ```

3. **–†–µ–∂–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```
   ‚òë –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
   ‚Üí –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞
   
   ‚òê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
   ‚Üí –ó–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –æ–±—Ä–µ–∑–∞–Ω—ã (clamped)
   ```

4. **–ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
   ```
   [üîÑ –ü—Ä–∏–º–µ–Ω–∏—Ç—å]
   ```
   –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ç–µ–∫—É—â–∏–π —Ç–∏–ø –∏–ª–∏ –∫—É–± –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.

5. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏:**
   ```
   –†–∞–∑–º–µ—Ä –≤ –ø–∞–º—è—Ç–∏: 125.5 –ú–ë
   –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: 62.8 –ú–ë
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ: ‚Üì 2.0x
   ```
   
   - ‚Üì –∑–µ–ª–µ–Ω—ã–º - —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
   - ‚Üë –æ—Ä–∞–Ω–∂–µ–≤—ã–º - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

## üî¢ –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –≤ –ø–∞–º—è—Ç–∏

```swift
elementCount = height √ó width √ó channels

bytesPerElement:
- Float64: 8 bytes
- Float32: 4 bytes
- Int32: 4 bytes
- Int16, UInt16: 2 bytes
- Int8, UInt8: 1 byte

totalBytes = elementCount √ó bytesPerElement
```

**–ü—Ä–∏–º–µ—Ä:**
```
–ö—É–±: 512√ó512√ó224 = 58,720,256 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

Float64: 58,720,256 √ó 8 = 469,762,048 bytes ‚âà 448.0 –ú–ë
Float32: 58,720,256 √ó 4 = 234,881,024 bytes ‚âà 224.0 –ú–ë
UInt16:  58,720,256 √ó 2 = 117,440,512 bytes ‚âà 112.0 –ú–ë
UInt8:   58,720,256 √ó 1 =  58,720,256 bytes ‚âà  56.0 –ú–ë

–≠–∫–æ–Ω–æ–º–∏—è Float64 ‚Üí UInt8: 8x
```

## üíæ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏—Å—Ç–µ–º–µ `UUID` –≤ `HyperCube`, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:

```swift
// AppState.swift
func convertDataType(to targetType: DataType) {
    guard let current = cube else { return }
    
    if let converted = DataTypeConverter.convert(current, to: targetType, autoScale: autoScaleOnTypeConversion) {
        cube = converted  // ‚úÖ –ù–æ–≤—ã–π UUID ‚Üí –ø–∞–Ω–µ–ª—å –æ–±–Ω–æ–≤–∏—Ç—Å—è
        
        if originalCube?.originalDataType == current.originalDataType {
            originalCube = converted
        }
    }
}
```

**–ß—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (Float64, UInt8, –∏ —Ç.–¥.)
- ‚úÖ Min/Max –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- ‚úÖ –†–∞–∑–º–µ—Ä –≤ –ø–∞–º—è—Ç–∏

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: Float64, 512√ó512√ó224, 448 –ú–ë

–®–∞–≥–∏:
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö"
3. –í—ã–±—Ä–∞—Ç—å "UInt8 (0-255)"
4. –í–∫–ª—é—á–∏—Ç—å "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ"
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–∏–ø: UInt8
- –†–∞–∑–º–µ—Ä: 56 –ú–ë (‚Üì 8.0x)
- –î–∞–Ω–Ω—ã–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω—ã [dataMin, dataMax] ‚Üí [0, 255]
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: UInt8, 256√ó256√ó128, 8 –ú–ë

–®–∞–≥–∏:
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å Min-Max –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é [0, 1]
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö"
4. –í—ã–±—Ä–∞—Ç—å "Float32"
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–∏–ø: Float32
- –†–∞–∑–º–µ—Ä: 32 –ú–ë (‚Üë 4.0x)
- –î–∞–Ω–Ω—ã–µ: [0, 1] –≤ Float32 —Ñ–æ—Ä–º–∞—Ç–µ
- –ì–æ—Ç–æ–≤–æ –¥–ª—è TensorFlow/PyTorch ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: UInt16, 1024√ó1024√ó100, 200 –ú–ë

–®–∞–≥–∏:
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö"
3. –í—ã–±—Ä–∞—Ç—å "UInt8 (0-255)"
4. –í–∫–ª—é—á–∏—Ç—å "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ"
5. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–∏–ø: UInt8
- –†–∞–∑–º–µ—Ä: 100 –ú–ë (‚Üì 2.0x)
- –î–∏–∞–ø–∞–∑–æ–Ω [0, 65535] –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω –≤ [0, 255]
- –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û–±—Ä–µ–∑–∫–∞ –±–µ–∑ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: Float64 [0, 1], 512√ó512√ó200, 400 –ú–ë

–®–∞–≥–∏:
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å Min-Max [0, 255] (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö"
4. –í—ã–±—Ä–∞—Ç—å "UInt8 (0-255)"
5. –í—ã–∫–ª—é—á–∏—Ç—å "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ"
6. –ù–∞–∂–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–∏–ø: UInt8
- –†–∞–∑–º–µ—Ä: 50 –ú–ë (‚Üì 8.0x)
- –ó–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –æ–∫—Ä—É–≥–ª–µ–Ω—ã –∏ –æ–±—Ä–µ–∑–∞–Ω—ã
- –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
```

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### DataTypeConverter.swift

```swift
class DataTypeConverter {
    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    static func convert(_ cube: HyperCube, to targetType: DataType, autoScale: Bool) -> HyperCube?
    
    // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    private static func convertWithScaling(_ cube: HyperCube, to targetType: DataType) -> DataStorage?
    
    // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å –æ–±—Ä–µ–∑–∫–æ–π
    private static func convertWithClamping(_ cube: HyperCube, to targetType: DataType) -> DataStorage?
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ç–∏–ø–∞
    private static func getTypeRange(_ type: DataType) -> (min: Double, max: Double)
    
    // –£–ø–∞–∫–æ–≤–∫–∞ –≤ —Ü–µ–ª–µ–≤–æ–π —Ç–∏–ø
    private static func wrapInTargetStorage(_ data: [Double], targetType: DataType) -> DataStorage?
}
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

```swift
1. –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫—É–±–∞ (min, max)
2. –ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞ (targetMin, targetMax)
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:
   a. –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ [0, 1]: normalized = (value - dataMin) / (dataMax - dataMin)
   b. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –≤ —Ü–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω: newValue = targetMin + normalized * targetRange
4. –û–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ —Ü–µ–ª–æ–≥–æ (–¥–ª—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤)
5. –û–±—Ä–µ–∑–∞—Ç—å (clamping) –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
6. –£–ø–∞–∫–æ–≤–∞—Ç—å –≤ DataStorage –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å –æ–±—Ä–µ–∑–∫–æ–π:

```swift
1. –ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞ (targetMin, targetMax)
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:
   a. –û–±—Ä–µ–∑–∞—Ç—å: newValue = max(targetMin, min(targetMax, value))
3. –û–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ —Ü–µ–ª–æ–≥–æ (–¥–ª—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤)
4. –£–ø–∞–∫–æ–≤–∞—Ç—å –≤ DataStorage –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–∞–º—è—Ç—å:

```
–ö—É–± 512√ó512√ó224:

Float64 ‚Üí Float32: 2x —ç–∫–æ–Ω–æ–º–∏—è
Float64 ‚Üí UInt16:  4x —ç–∫–æ–Ω–æ–º–∏—è
Float64 ‚Üí UInt8:   8x —ç–∫–æ–Ω–æ–º–∏—è
Float32 ‚Üí UInt8:   4x —ç–∫–æ–Ω–æ–º–∏—è
UInt16 ‚Üí UInt8:    2x —ç–∫–æ–Ω–æ–º–∏—è
```

### –°–∫–æ—Ä–æ—Å—Ç—å:

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥:
- ‚úÖ O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –≥–¥–µ n = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ map()
- ‚úÖ –î–ª—è –±–æ–ª—å—à–∏—Ö –∫—É–±–æ–≤ (~400 –ú–ë): 1-3 —Å–µ–∫—É–Ω–¥—ã

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –ü–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏

–ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑ —Ç–∏–ø–æ–≤ —Å –±–æ–ª—å—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é –≤ –º–µ–Ω—å—à—É—é:

```
Float64 ‚Üí Float32: –ü–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ 7-–≥–æ –∑–Ω–∞–∫–∞
Float64 ‚Üí UInt8:   –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ 256 —É—Ä–æ–≤–Ω–µ–π)
UInt16 ‚Üí UInt8:    –ü–æ—Ç–µ—Ä—è –¥–µ—Ç–∞–ª–µ–π (65536 ‚Üí 256 —É—Ä–æ–≤–Ω–µ–π)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

### 2. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ

–¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –æ–∫—Ä—É–≥–ª—è—é—Ç—Å—è:
```
127.4 ‚Üí 127
127.5 ‚Üí 128
127.6 ‚Üí 128
```

### 3. –ù–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ–π:
```
Float64 [0.123456789] ‚Üí UInt8 [31] ‚Üí Float64 [31.0]
‚ùå –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π.

### 4. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤ **–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞** –æ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
- –ú–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ø–æ—Ç–æ–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ú–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø–æ—Ç–æ–º –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å
- `originalCube` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ –º–µ–Ω—è–ª—Å—è

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:**
   - –ï—Å–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∫—É–±
   - –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ç–µ–∫—É—â–∏–π —Ç–∏–ø

2. **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:**
   - üü¢ –ó–µ–ª–µ–Ω—ã–π ‚Üì - —É–º–µ–Ω—å—à–µ–Ω–∏–µ (—Ö–æ—Ä–æ—à–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏)
   - üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Üë - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏)

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –¢–µ–∫—É—â–∏–π —Ç–∏–ø –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞
   - –í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–∏–π –ø—Ä–∏ —Å–º–µ–Ω–µ –∫—É–±–∞
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

4. **–û–ø–∏—Å–∞–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ: "–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞"
   - –û–±—Ä–µ–∑–∫–∞: "–ó–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –æ–±—Ä–µ–∑–∞–Ω—ã (clamped)"

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `HyperCubeModel.swift` - –º–æ–¥–µ–ª—å —Å DataStorage
- `ImageInfoPanel.swift` - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ UUID
- `DataTypePanel.swift` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `DataTypeConverter.swift` - –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- `AppState.swift` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- `ContentView.swift` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ UI

## üìÖ –î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

2025-11-28

## üéØ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Batch –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

2. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:**
   - –ü–æ–∫–∞–∑–∞—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É –¥–æ –∏ –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
   - –ó–∞–ø–æ–º–Ω–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (–∞–≤—Ç–æ/–æ–±—Ä–µ–∑–∫–∞)

4. **–≠–∫—Å–ø–æ—Ä—Ç:**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É–± –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã:**
   - `UInt32`, `Int64`, `UInt64`
   - `Float16` (half precision)

