# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é (5270, 5720, 1) –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–ª–µ—Ç–∞–ª–∞, —Ç–∞–∫ –∫–∞–∫:
1. –ö–æ–¥ –æ–∂–∏–¥–∞–ª –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π 3D –≥–∏–ø–µ—Ä–∫—É–± —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–∞–Ω–∞–ª–æ–≤
2. –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Å–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ –∏–∑ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π = 1
3. –ü–æ–ø—ã—Ç–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ª–∞–π–¥–µ—Ä–æ–º –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏–≤–æ–¥–∏–ª–∞ –∫ –æ—à–∏–±–∫–∞–º

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫–æ–≥–¥–∞ –æ–¥–Ω–æ –∏–∑ –∏–∑–º–µ—Ä–µ–Ω–∏–π —Ä–∞–≤–Ω–æ 1).

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 2D —Ä–µ–∂–∏–º–∞ (HyperCubeModel.swift)

```swift
var is2D: Bool {
    dims.0 == 1 || dims.1 == 1 || dims.2 == 1
}

var dims2D: (width: Int, height: Int)? {
    guard is2D else { return nil }
    
    if dims.0 == 1 {
        return (dims.2, dims.1)  // (1, H, W) ‚Üí W√óH
    } else if dims.1 == 1 {
        return (dims.2, dims.0)  // (C, 1, W) ‚Üí W√óC
    } else {
        return (dims.1, dims.0)  // (C, H, 1) ‚Üí H√óC
    }
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

```swift
func channelCount(for layout: CubeLayout) -> Int {
    if is2D { return 1 }  // 2D –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç 1 "–∫–∞–Ω–∞–ª"
    
    // ... –æ–±—ã—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è 3D
}
```

### 3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (ImageRenderer.swift)

–î–æ–±–∞–≤–ª–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `render2DImage()`:

```swift
private static func render2DImage(cube: HyperCube) -> NSImage? {
    guard cube.is2D, let dims2D = cube.dims2D else { return nil }
    
    let width = dims2D.width
    let height = dims2D.height
    
    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∞—è –æ—Å—å = 1
    var slice = [Double](repeating: 0.0, count: width * height)
    
    let (d0, d1, d2) = cube.dims
    
    if d0 == 1 {
        // –§–æ—Ä–º–∞ (1, H, W)
        for y in 0..<height {
            for x in 0..<width {
                let lin = cube.linearIndex(i0: 0, i1: y, i2: x)
                slice[y * width + x] = cube.data[lin]
            }
        }
    } else if d1 == 1 {
        // –§–æ—Ä–º–∞ (C, 1, W)
        for y in 0..<height {
            for x in 0..<width {
                let lin = cube.linearIndex(i0: y, i1: 0, i2: x)
                slice[y * width + x] = cube.data[lin]
            }
        }
    } else {
        // –§–æ—Ä–º–∞ (C, H, 1)
        for y in 0..<height {
            for x in 0..<width {
                let lin = cube.linearIndex(i0: y, i1: x, i2: 0)
                slice[y * width + x] = cube.data[lin]
            }
        }
    }
    
    // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    let normalized = DataNormalizer.normalize(slice)
    let pixels = DataNormalizer.toUInt8(normalized.normalized)
    
    return createGrayscaleImage(pixels: pixels, width: width, height: height)
}
```

### 4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI (ContentView.swift)

#### –°–∫—Ä—ã—Ç–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ –¥–ª—è 2D:

- ‚ùå Picker Layout (–Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è 2D)
- ‚ùå Picker Mode (Gray/RGB) (–Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è 2D)
- ‚ùå Slider –∫–∞–Ω–∞–ª–æ–≤ (–Ω–µ—Ç –∫–∞–Ω–∞–ª–æ–≤ –≤ 2D)
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª–∏–Ω –≤–æ–ª–Ω (–Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ 2D)

#### –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:

- ‚úÖ "–†–µ–∂–∏–º: 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
- ‚úÖ "—Ä–∞–∑–º–µ—Ä: 5720 √ó 5270" (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã)

### 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å (ImageInfoPanel.swift)

–î–ª—è 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:

```
–§–æ—Ä–º–∞—Ç:         MATLAB (.mat)
–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:     Float64
–¢–∏–ø:            2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
–†–∞–∑–º–µ—Ä:         5720 √ó 5270
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ú–∏–Ω. –∑–Ω–∞—á–µ–Ω–∏–µ:  0.0234
–ú–∞–∫—Å. –∑–Ω–∞—á–µ–Ω–∏–µ: 0.9876
–°—Ä–µ–¥–Ω–µ–µ:        0.4521
–°—Ç–∞–Ω–¥. –æ—Ç–∫–ª.:   0.2341
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–†–∞–∑–º–µ—Ä –≤ –ø–∞–º—è—Ç–∏: 213.5 –ú–ë
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã 2D

### MATLAB (.mat)
- `(1, H, W)` - –æ–¥–Ω–∞ "–ø–ª–æ—Å–∫–æ—Å—Ç—å"
- `(C, 1, W)` - –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ "–∫–∞–Ω–∞–ª"
- `(C, H, 1)` - –æ–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü –Ω–∞ "–∫–∞–Ω–∞–ª"

–ü—Ä–∏–º–µ—Ä: `(5270, 5720, 1)` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 5720√ó5270 –ø–∏–∫—Å–µ–ª–µ–π

### TIFF (.tiff)
- Single-page TIFF –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–µ—Ç 2D
- Multi-page —Å 1 —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –û–¥–Ω–æ–∫–∞–Ω–∞–ª—å–Ω–æ–µ HSI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```matlab
% MATLAB
data = rand(5270, 5720, 1);  % H√óW√ó1
save('single_channel.mat', 'data');
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ HSIView:
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 5720√ó5270
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–∞–π–¥–µ—Ä –∫–∞–Ω–∞–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä 2: –û–±—ã—á–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è

```matlab
% MATLAB
img = imread('photo.jpg');
gray_img = rgb2gray(img);
data = reshape(gray_img, [size(gray_img, 1), size(gray_img, 2), 1]);
save('photo_2d.mat', 'data');
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–∑—É–ª—å—Ç–∞—Ç PCA (–ø–µ—Ä–≤–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

```matlab
% MATLAB
% hypercube shape: (H, W, C)
pca_result = pca_first_component(hypercube);  % (H, W)
data = reshape(pca_result, [size(pca_result, 1), size(pca_result, 2), 1]);
save('pca_first.mat', 'data');
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤

–õ–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è 3D ‚Üí 2D:
- `(1, H, W)` ‚Üí width=W, height=H
- `(C, 1, W)` ‚Üí width=W, height=C
- `(C, H, 1)` ‚Üí width=H, height=C

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–∑–∏—Ü–∏–∏ –µ–¥–∏–Ω–∏—á–Ω–æ–π –æ—Å–∏:
- –ï—Å–ª–∏ `d0 == 1`: `data[0, y, x]`
- –ï—Å–ª–∏ `d1 == 1`: `data[y, 0, x]`
- –ï—Å–ª–∏ `d2 == 1`: `data[y, x, 0]`

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

–¢–∞ –∂–µ –ª–æ–≥–∏–∫–∞, —á—Ç–æ –∏ –¥–ª—è 3D:
- Min-Max –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ UInt8 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –æ–¥–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è 2D –∏ 3D –¥–∞–Ω–Ω—ã—Ö
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –≤—Ä—É—á–Ω—É—é
3. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π UI**: —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è 2D

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ 3D –≥–∏–ø–µ—Ä–∫—É–±—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ API –¥–ª—è 3D —Å–ª—É—á–∞—è
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏

### Satellite imagery (–æ–¥–Ω–∞ –ø–æ–ª–æ—Å–∞)
```
Landsat Band 4 (Near Infrared)
–†–∞–∑–º–µ—Ä: (7000, 8000, 1)
‚Üí –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 8000√ó7000 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

### Medical imaging (–æ–¥–∏–Ω —Å—Ä–µ–∑)
```
MRI slice
–†–∞–∑–º–µ—Ä: (512, 512, 1)
‚Üí –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 512√ó512 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
```
Vegetation Index (NDVI)
–†–∞–∑–º–µ—Ä: (5270, 5720, 1)
‚Üí –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ 5720√ó5270 2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è 2D —Ä–µ–∂–∏–º–∞:
- [ ] –¶–≤–µ—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã (colormaps) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] Histogram equalizaci√≥n
- [ ] –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π/–ø–ª–æ—â–∞–¥–µ–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PNG, JPEG)

## –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

‚úÖ Crash –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (5270, 5720, 1)
‚úÖ –û—à–∏–±–∫–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–Ω–∞–ª–æ–≤
‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–ª–∞–π–¥–µ—Ä–æ–º (–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å)
‚úÖ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤
‚úÖ –ù–µ–Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã –≤ UI

---

**2D –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è!** üéâ

