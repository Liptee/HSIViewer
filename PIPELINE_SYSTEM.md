_# –°–∏—Å—Ç–µ–º–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üí° –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫—É–±—É, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
- –ö–Ω–æ–ø–∫–∞ "+" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞–º–∏
- –í—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–µ –≤ –∫–æ–Ω–µ—Ü –ø–∞–π–ø–ª–∞–π–Ω–∞
- –û–ø–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –¥–∞–Ω–Ω—ã–º

### 2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ (Drag & Drop)**
- –û–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –º—ã—à—å—é
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ—Ä—è–¥–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏

### 3. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
- –ö–ª–∏–∫ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–∞—Ä–∞–Ω–¥–∞—à–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### 4. **–£–¥–∞–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
- –ö–Ω–æ–ø–∫–∞ "-" –≤ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö–ª–∞–≤–∏—à–∞ Delete –ø—Ä–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å" —É–¥–∞–ª—è–µ—Ç –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω

## üìä UI Layout

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –¢–æ–ø-–±–∞—Ä: –ò–º—è —Ñ–∞–π–ª–∞                                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  PIPELINE    ‚îÇ        IMAGE VIEW                ‚îÇ  INFO PANEL   ‚îÇ
‚îÇ   PANEL      ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  + Add       ‚îÇ      [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]               ‚îÇ  ‚Ä¢ Info       ‚îÇ
‚îÇ              ‚îÇ                                  ‚îÇ  ‚Ä¢ (—Å—Ç–∞—Ä—ã–µ    ‚îÇ
‚îÇ  1. Norm     ‚îÇ                                  ‚îÇ     –ø–∞–Ω–µ–ª–∏    ‚îÇ
‚îÇ     [edit]   ‚îÇ                                  ‚îÇ     —Å–∫—Ä—ã—Ç—ã)   ‚îÇ
‚îÇ              ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  2. Type     ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ     [edit]   ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  [Clear]     ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ                                  ‚îÇ               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: –ö–∞–Ω–∞–ª—ã, Zoom, –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π

### 1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**

**–ò–∫–æ–Ω–∫–∞:** `chart.line.uptrend.xyaxis`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –¢–∏–ø –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (7 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- Min/Max –¥–ª—è custom
- Lower/Upper –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ –¥–ª—è percentile

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```swift
CubeNormalizer.apply(type, to: cube, parameters: params)
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ:**
```
üîÑ Min-Max (0-1)
   [0, 1]

üîÑ Percentile
   2%-98%

üîÑ Z-Score
   Z-Score
```

### 2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö**

**–ò–∫–æ–Ω–∫–∞:** `arrow.triangle.2.circlepath`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –¶–µ–ª–µ–≤–æ–π —Ç–∏–ø (Float64, Float32, UInt8, UInt16, Int8, Int16, Int32)
- –†–µ–∂–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (auto/clamp)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```swift
DataTypeConverter.convert(cube, to: targetType, autoScale: autoScale)
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ:**
```
üîÑ UInt8
   UInt8 (auto)

üîÑ Float32
   Float32 (clamp)
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### PipelineOperation (Model)

```swift
struct PipelineOperation: Identifiable, Equatable {
    let id: UUID
    let type: PipelineOperationType
    var normalizationType: CubeNormalizationType?
    var normalizationParams: CubeNormalizationParameters?
    var targetDataType: DataType?
    var autoScale: Bool?
    
    func apply(to cube: HyperCube) -> HyperCube?
}
```

### PipelinePanel (View)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- Header: –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏"
- Empty State: –ö–æ–≥–¥–∞ –ø–∞–π–ø–ª–∞–π–Ω –ø—É—Å—Ç
- Operations List: –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π —Å Drag & Drop
- Footer: –ö–Ω–æ–ø–∫–∏ "+ –î–æ–±–∞–≤–∏—Ç—å" –∏ "–û—á–∏—Å—Ç–∏—Ç—å"

**OperationRow:**
- Drag handle (‚â°)
- –ò–∫–æ–Ω–∫–∞ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –¥–µ—Ç–∞–ª–∏
- –ö–Ω–æ–ø–∫–∏ Edit –∏ Delete

**OperationEditorView:**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É

### AppState

```swift
class AppState: ObservableObject {
    @Published var pipelineOperations: [PipelineOperation] = []
    private var originalCube: HyperCube?
    
    func addOperation(type: PipelineOperationType)
    func removeOperation(at index: Int)
    func moveOperation(from: Int, to: Int)
    func clearPipeline()
    func applyPipeline()
}
```

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞

```swift
func applyPipeline() {
    guard let original = originalCube else { return }
    
    if pipelineOperations.isEmpty {
        cube = original
        return
    }
    
    var result: HyperCube? = original
    
    // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
    for operation in pipelineOperations {
        guard let current = result else { break }
        result = operation.apply(to: current)
    }
    
    cube = result ?? original
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π
- –ï—Å–ª–∏ –ª—é–±–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç nil, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ –Ω–µ–µ
- originalCube –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º

## üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è + –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–∞

**–¶–µ–ª—å:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è machine learning

**–®–∞–≥–∏:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å UInt8 –∫—É–± [0, 255]
2. –ù–∞–∂–∞—Ç—å "+" ‚Üí "–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è"
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Min-Max [0, 1]
4. –ù–∞–∂–∞—Ç—å "+" ‚Üí "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö"
5. –í—ã–±—Ä–∞—Ç—å Float32, auto scaling
6. –ì–æ—Ç–æ–≤–æ! –î–∞–Ω–Ω—ã–µ [0, 1] –≤ Float32

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü–∞–π–ø–ª–∞–π–Ω:
1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Min-Max (0-1)
   [0, 1]
2. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: Float32
   Float32 (auto)

–û—Ä–∏–≥–∏–Ω–∞–ª: UInt8 [0, 255]
–†–µ–∑—É–ª—å—Ç–∞—Ç: Float32 [0.0, 1.0]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

**–ò—Å—Ö–æ–¥–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:**
```
1. Percentile (2%-98%)
2. UInt8
3. Log
```

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å "Log" –Ω–∞ –ø–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ

**–ù–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω:**
```
1. Log
2. Percentile (2%-98%)
3. UInt8
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

**–¶–µ–ª—å:** –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏

**–®–∞–≥–∏:**
1. Percentile (2%-98%) - —É–±—Ä–∞—Ç—å –≤—ã–±—Ä–æ—Å—ã
2. Z-Score - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è
3. Min-Max [0, 1] - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

**–ü–∞–π–ø–ª–∞–π–Ω:**
```
1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Percentile
   2%-98%
2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Z-Score
   Z-Score
3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Min-Max (0-1)
   [0, 1]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–¶–µ–ª—å:** –°—ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** Float64 [0.123, 456.789], 448 –ú–ë

**–ü–∞–π–ø–ª–∞–π–Ω:**
```
1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Min-Max (0-1)
   [0, 1]
2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: Min-Max (custom)
   [0, 255]
3. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: UInt8
   UInt8 (clamp)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** UInt8 [0, 255], 56 –ú–ë (‚Üì 8.0x)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. **Drag & Drop**

```swift
.onDrag {
    isDragging = true
    return NSItemProvider(object: operation.id.uuidString as NSString)
}
.onDrop(of: [.text], delegate: DropDelegate(
    operation: operation,
    index: index,
    isDragging: $isDragging,
    onMove: { from, to in state.moveOperation(from: from, to: to) }
))
```

**–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
- –ö—É—Ä—Å–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ drag cursor
- –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏

### 2. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**

```swift
.onDeleteCommand {
    if let selected = selectedOperation {
        // –£–¥–∞–ª–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
    }
}
```

### 3. **–ú–æ–¥–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

```swift
.sheet(item: $editingOperation) { operation in
    OperationEditorView(operation: $editingOperation)
        .environmentObject(state)
}
```

**–ü—Ä–∏–≤—è–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```swift
Picker("", selection: Binding(
    get: { op.normalizationType ?? .none },
    set: { newValue in
        if let index = state.pipelineOperations.firstIndex(where: { $0.id == op.id }) {
            state.pipelineOperations[index].normalizationType = newValue
        }
    }
))
```

### 4. **–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**

```swift
@Published var pipelineOperations: [PipelineOperation] = []

// –ü—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ pipelineOperations –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
// 1. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è applyPipeline()
// 2. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è cube
// 3. cube.id –º–µ–Ω—è–µ—Ç—Å—è (–Ω–æ–≤—ã–π UUID)
// 4. ImageInfoPanel –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è
// 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–î–ª—è –∫—É–±–∞ 512√ó512√ó224 (~400 –ú–ë):

```
–û–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è: 1-3 —Å–µ–∫—É–Ω–¥—ã
–î–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏: 2-6 —Å–µ–∫—É–Ω–¥
–¢—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏: 3-9 —Å–µ–∫—É–Ω–¥

–õ–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –ü—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–∞—è –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º

## üé® UI/UX –¥–µ—Ç–∞–ª–∏

### –¶–≤–µ—Ç–∞ –∏ —Å—Ç–∏–ª–∏

**–í—ã–¥–µ–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è:**
```swift
.background(Color.accentColor.opacity(0.1))
.overlay(RoundedRectangle(cornerRadius: 6)
    .stroke(Color.accentColor, lineWidth: 2))
```

**Hover —ç—Ñ—Ñ–µ–∫—Ç:**
```swift
.onHover { hovering in
    isHovered = hovering
    // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ Edit/Delete
}
```

**–ò–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤:**
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: `chart.line.uptrend.xyaxis`
- –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö: `arrow.triangle.2.circlepath`

### –ê–Ω–∏–º–∞—Ü–∏–∏

```swift
withAnimation(.easeInOut(duration: 0.2)) {
    // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
}
```

### –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                               ‚îÇ
‚îÇ          üì¶ (tray)            ‚îÇ
‚îÇ                               ‚îÇ
‚îÇ      –ü–∞–π–ø–ª–∞–π–Ω –ø—É—Å—Ç            ‚îÇ
‚îÇ                               ‚îÇ
‚îÇ  –ù–∞–∂–º–∏—Ç–µ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å    ‚îÇ
‚îÇ         –æ–±—Ä–∞–±–æ—Ç–∫—É             ‚îÇ
‚îÇ                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. **–ü–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**

```
–ü–∞–π–ø–ª–∞–π–Ω A:
1. Min-Max [0, 1]
2. UInt8

–†–µ–∑—É–ª—å—Ç–∞—Ç: [0, 1] –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≤ [0, 255]

–ü–∞–π–ø–ª–∞–π–Ω B:
1. UInt8
2. Min-Max [0, 1]

–†–µ–∑—É–ª—å—Ç–∞—Ç: –°–Ω–∞—á–∞–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è, –ø–æ—Ç–æ–º –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è!**

### 2. **–ù–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π**

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã:
- Float64 ‚Üí UInt8: –ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- Percentile: –æ–±—Ä–µ–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- Log: –Ω–µ–ª–∏–Ω–µ–π–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** originalCube –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### 3. **–ü–∞–º—è—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

–ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫—É–± –≤ –ø–∞–º—è—Ç–∏:
```
Original: 400 –ú–ë
+Operation1: 400 –ú–ë
+Operation2: 400 –ú–ë
= 1.2 –ì–ë –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

**–ù–æ:** –¢–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤ cube

### 4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø–∞–Ω–µ–ª—è–º–∏**

–°—Ç–∞—Ä—ã–µ –ø–∞–Ω–µ–ª–∏ (Normalization, DataType) **–æ—Å—Ç–∞—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, –Ω–æ:
- –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–∞–π–ø–ª–∞–π–Ω–æ–º
- –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø–∞–π–ø–ª–∞–π–Ω

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π**
```
–ö–Ω–æ–ø–∫–∞ "Duplicate" —Å–æ–∑–¥–∞–µ—Ç –∫–æ–ø–∏—é –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### 2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤**
```json
{
  "pipeline": [
    {
      "type": "normalization",
      "params": {
        "type": "minMax",
        "min": 0,
        "max": 1
      }
    },
    {
      "type": "dataType",
      "params": {
        "targetType": "uint8",
        "autoScale": true
      }
    }
  ]
}
```

### 3. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
```
–ü–æ–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä—è–¥–æ–º —Å –æ–ø–µ—Ä–∞—Ü–∏–µ–π
```

### 4. **–≠–∫—Å–ø–æ—Ä—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
```
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
```

### 5. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (Undo/Redo)**
```
Cmd+Z –¥–ª—è –æ—Ç–º–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
```

### 6. **–ì—Ä—É–ø–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π**
```
–°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ "–ø—Ä–µ—Å–µ—Ç"
```

## üìù –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `PipelineOperation.swift` - –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–π
- `PipelinePanel.swift` - UI –ø–∞–Ω–µ–ª—å –ø–∞–π–ø–ª–∞–π–Ω–∞
- `AppState.swift` - –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–º
- `ContentView.swift` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
- `CubeNormalizer.swift` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–π
- `DataTypeConverter.swift` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤

## üìÖ –î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

2025-11-28

